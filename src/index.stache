<html>
  <head>
    <title>Place My Order</title>

    {{asset "css"}}
  </head>
  <body>
    <can-import from="place-my-order/app" as="viewModel" />

    <can-import from="place-my-order/header.component!" />
    <can-import from="place-my-order/loading.component!" />
    <can-import from="place-my-order-assets" />

    <pmo-header page="{page}"></pmo-header>

    {{#eq page "home"}}
      <can-import from="place-my-order/home.component!" can-tag="pmo-loading">
        <pmo-home></pmo-home>
      </can-import>
    {{/eq}}

    {{#eq page "restaurants"}}
      {{#if slug}}
        {{#eq action 'order'}}
          <can-import from="place-my-order/order/new/" can-tag="pmo-loading">
            <pmo-order-new slug="{slug}"></pmo-order-new>
          </can-import>
        {{/eq}}

        {{^if action}}
          <can-import from="place-my-order/restaurant/details.component!" can-tag="pmo-loading">
            <pmo-restaurant-details></pmo-restaurant-details>
          </can-import>
        {{/if}}
      {{else}}
        <can-import from="place-my-order/restaurant/list/" can-tag="pmo-loading">
          <pmo-restaurant-list></pmo-restaurant-list>
        </can-import>
      {{/if}}
    {{/eq}}

    {{#eq page "orders"}}
      <can-import from="place-my-order/order/history.component!" can-tag="pmo-loading">
        <pmo-order-history></pmo-order-history>
      </can-import>
    {{/eq}}

    {{asset "inline-cache"}}

    {{#switch @env.NODE_ENV}}

      {{#case "production"}}
        <script src="https://place-my-order.divshot.io/node_modules/steal/steal.production.js" main="place-my-order/index.stache!done-autorender"></script>
      {{/case}}

      {{#default}}
        <script src="/node_modules/steal/steal.js"></script>
      {{/default}}

    {{/switch}}
  </body>
</html>
